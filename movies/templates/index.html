{% extends "base.html" %}

{% block title %}Главная - Movie Catalog{% endblock %}

{% block content %}
<h2 class="mb-3">Топ-250</h2>
<div class="d-flex overflow-auto gap-3 pb-3 mb-5 border-bottom">
    {% for movie in top_movies %}
    <div class="card bg-dark text-white" style="min-width: 200px;">
        <img src="{{ movie.image.url }}" class="card-img-top" style="height: 300px; object-fit: cover;">
        <div class="card-body">
            <h6 class="card-title mb-1">{{ movie.title }}</h6>
            <small>⭐ {{ movie.avg_rating|floatformat:1 }}</small><br>
            <a href="{% url 'movie_detail' movie.id %}" class="btn btn-sm btn-outline-light rounded-pill mt-2">Подробнее</a>
        </div>
    </div>
    {% endfor %}
</div>

<h2 class="mb-3">Новинки</h2>
<div class="d-flex overflow-auto gap-3 pb-3 mb-5 border-bottom">
    {% for movie in new_movies %}
    <div class="card bg-dark text-white" style="min-width: 200px;">
        <img src="{{ movie.image.url }}" class="card-img-top" style="height: 300px; object-fit: cover;">
        <div class="card-body">
            <h6 class="card-title mb-1">{{ movie.title }}</h6>
            <small>{{ movie.release_date }}</small><br>
            <a href="{% url 'movie_detail' movie.id %}" class="btn btn-sm btn-outline-light rounded-pill mt-2">Подробнее</a>
        </div>
    </div>
    {% endfor %}
</div>

<h2 class="mb-3">Популярные</h2>
<div class="d-flex overflow-auto gap-3 pb-3">
    {% for movie in popular_movies %}
    <div class="card bg-dark text-white" style="min-width: 200px;">
        <img src="{{ movie.image.url }}" class="card-img-top" style="height: 300px; object-fit: cover;">
        <div class="card-body">
            <h6 class="card-title mb-1">{{ movie.title }}</h6>
            <small>{{ movie.reviews.count }} отзывов</small><br>
            <a href="{% url 'movie_detail' movie.id %}" class="btn btn-sm btn-outline-light rounded-pill mt-2">Подробнее</a>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
